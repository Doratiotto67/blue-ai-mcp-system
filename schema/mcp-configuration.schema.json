{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "MCP Configuration",
  "type": "object",
  "required": ["mcp_configuration", "metadata"],
  "properties": {
    "mcp_configuration": {
      "type": "object",
      "required": ["docker_settings", "agent_connections"],
      "properties": {
        "docker_settings": {
          "type": "object",
          "required": ["host", "port", "api_version", "tls_verification", "restart_policy"],
          "properties": {
            "host": {"type": "string"},
            "port": {"type": "integer", "minimum": 1},
            "api_version": {"type": "string"},
            "tls_verification": {"type": "boolean"},
            "cert_path": {"type": "string"},
            "container_labels": {"type": "object", "additionalProperties": {"type": "string"}},
            "exposed_ports": {"type": "array", "items": {"type": "string"}},
            "env": {"type": "object", "additionalProperties": {"type": "string"}},
            "volumes": {"type": "object", "additionalProperties": {"type": "string"}},
            "restart_policy": {
              "type": "object",
              "required": ["Name"],
              "properties": {
                "Name": {"type": "string"},
                "MaximumRetryCount": {"type": "integer"}
              }
            }
          }
        },
        "protocols_supported": {
          "type": "array",
          "items": {"type": "string", "enum": ["http", "https"]}
        },
        "agent_connections": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["agent_id", "endpoint", "auth_type", "credentials", "health_check"],
            "properties": {
              "agent_id": {"type": "string"},
              "endpoint": {"type": "string", "format": "uri"},
              "endpoint_https": {"type": "string"},
              "protocols": {"type": "array", "items": {"type": "string", "enum": ["http", "https"]}},
              "auth_type": {"type": "string"},
              "credentials": {
                "type": "object",
                "required": ["username"],
                "properties": {
                  "username": {"type": "string"},
                  "password": {"type": "string"},
                  "token": {"type": "string"}
                }
              },
              "health_check": {
                "type": "object",
                "required": ["endpoint", "interval", "timeout"],
                "properties": {
                  "endpoint": {"type": "string", "format": "uri"},
                  "interval": {"type": "integer", "minimum": 1},
                  "timeout": {"type": "integer", "minimum": 1},
                  "retry_attempts": {"type": "integer", "minimum": 0}
                }
              },
              "reconnect": {
                "type": "object",
                "properties": {
                  "enabled": {"type": "boolean"},
                  "max_attempts": {"type": "integer"},
                  "initial_backoff_ms": {"type": "integer"},
                  "max_backoff_ms": {"type": "integer"}
                }
              }
            }
          }
        },
        "backend_integration": {
          "type": "object",
          "required": ["api_base_url", "timeout"],
          "properties": {
            "api_base_url": {"type": "string"},
            "auth_token": {"type": "string"},
            "sync_interval": {"type": "integer"},
            "timeout": {"type": "integer"}
          }
        },
        "security": {
          "type": "object",
          "properties": {
            "encryption": {"type": "object"},
            "network": {"type": "object"},
            "authentication": {"type": "object"}
          }
        },
        "logging": {"type": "object"},
        "performance": {"type": "object"},
        "resilience": {"type": "object"}
      }
    },
    "metadata": {
      "type": "object",
      "required": ["version", "environment"],
      "properties": {
        "version": {"type": "string"},
        "environment": {"type": "string"},
        "last_updated": {"type": "string"},
        "maintainer": {"type": "string"},
        "documentation": {"type": "string"},
        "support": {"type": "string"}
      }
    }
  }
}